//
//  Extensions.swift
//  PDA
//
//  Created by Mathias Quintero on 7/8/16.
//  Copyright Â© 2016 Mathias Quintero. All rights reserved.
//

import Foundation
extension String {
    
    func matchesForRegexAtStart(for regex: String!) -> [NSRange] {
        do {
            let regex = try NSRegularExpression(pattern: regex, options: [])
            let nsString = self as NSString
            let results = regex.matchesInString(self,
                                                options: [], range: NSMakeRange(0, nsString.length))
            let filterd = results.filter() { result in
                return result.range.toRange()?.startIndex == 0
            }
            return filterd.map() { result in
                return result.range
            }
        } catch let error as NSError {
            print("invalid regex: \(error.localizedDescription)")
            return []
        }
    }
    
    func rangeFromNSRange(nsRange : NSRange) -> Range<String.Index>? {
        let from16 = utf16.startIndex.advancedBy(nsRange.location, limit: utf16.endIndex)
        let to16 = from16.advancedBy(nsRange.length, limit: utf16.endIndex)
        if let from = String.Index(from16, within: self),
            let to = String.Index(to16, within: self) {
            return from ..< to
        }
        return nil
    }
    
}

extension Array {
    var match : (head: Element, tail: [Element])? {
        return (count > 0) ? (self[0],Array(self[1..<count])) : nil
    }
}